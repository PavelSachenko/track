(this["webpackJsonpstart-react-typescript"]=this["webpackJsonpstart-react-typescript"]||[]).push([[14,13],{117:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var a=r.createElement("defs",null),l=r.createElement("path",{d:"M28.02 8.61L16 .58 3.98 8.6V31.5h24.04V8.61zm-9.81 20.96h-4.42V25h4.42v4.57zm7.9 0h-5.98v-6.5h-8.26v6.5H5.9V9.64L16 2.88l10.1 6.76v19.93z"}),s=r.createElement("path",{d:"M8.5 14.9h7V9.18h-7v5.72zm1.92-3.8h3.16v1.88h-3.16V11.1zM23.5 9.18h-7v5.72h7V9.18zm-1.92 3.8h-3.16V11.1h3.16v1.88zM8.5 21.94h7v-5.72h-7v5.72zm1.92-3.8h3.16v1.88h-3.16v-1.88zM23.5 16.22h-7v5.72h7v-5.72zm-1.92 3.8h-3.16v-1.88h3.16v1.88z"});function o(e,t){var n=e.title,o=e.titleId,u=c(e,["title","titleId"]);return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"#000",viewBox:"0 0 32 32",ref:t,"aria-labelledby":o},u),n?r.createElement("title",{id:o},n):null,a,l,s)}var u=r.forwardRef(o);n.p},118:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var a=r.createElement("defs",null),l=r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("path",{d:"M16.968 1.715c2.599 0 4.743 2.08 4.743 4.679 0 1.494-.715 2.794-1.754 3.639C23.4 11.267 25.87 14.45 26 18.285h-1.69c-.13-3.964-3.379-7.083-7.342-7.083-3.964 0-7.213 3.12-7.343 7.083H8a9.107 9.107 0 015.978-8.252c-1.04-.845-1.69-2.145-1.69-3.64a4.66 4.66 0 014.68-4.678zm0 1.624a3.05 3.05 0 00-3.055 3.055 3.05 3.05 0 003.055 3.054 3.05 3.05 0 003.054-3.054 3.05 3.05 0 00-3.054-3.055z"})),s=r.createElement("g",{clipPath:"url(#clip1)"},r.createElement("path",{d:"M10.96.874c3.177 0 5.798 2.541 5.798 5.718 0 1.827-.873 3.415-2.144 4.448 4.21 1.509 7.227 5.4 7.386 10.086h-2.065c-.159-4.845-4.13-8.657-8.975-8.657-4.844 0-8.816 3.813-8.974 8.657H0A11.13 11.13 0 017.307 11.04c-1.27-1.033-2.065-2.621-2.065-4.448A5.695 5.695 0 0110.96.874zm0 1.985a3.729 3.729 0 00-3.733 3.733 3.729 3.729 0 003.733 3.733 3.728 3.728 0 003.733-3.733 3.728 3.728 0 00-3.733-3.733z"})),o=r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("path",{d:"M0 0h9v18H0z",transform:"translate(17 1)"})),r.createElement("clipPath",{id:"clip1"},r.createElement("path",{d:"M0 0h22v22H0z"})));function u(e,t){var n=e.title,u=e.titleId,b=c(e,["title","titleId"]);return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"#000",viewBox:"0 0 26 22",ref:t,"aria-labelledby":u},b),n?r.createElement("title",{id:u},n):null,a,l,s,o)}var b=r.forwardRef(u);n.p},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var a=r.createElement("defs",null),l=r.createElement("path",{d:"M3.99 26.614a3.1 3.1 0 104.058-2.934v-4.746a3.098 3.098 0 000-5.89V8.32a3.1 3.1 0 10-1.92 0v4.736a3.098 3.098 0 000 5.891v4.733a3.104 3.104 0 00-2.138 2.934zm3.101 1.181a1.18 1.18 0 11.45-.089 1.18 1.18 0 01-.453.09h.003zm0-23.613a1.18 1.18 0 11-.003 0h.003zm0 10.628a1.18 1.18 0 11-1.095.735 1.181 1.181 0 011.092-.739l.003.004zM12.144.883v9.005H24.81V.883H12.144zM22.89 7.968h-8.826V2.803h8.826v5.165zM28.01 11.485H12.144v8.995H28.01v-8.995zm-1.92 7.075H14.064v-5.155H26.09v5.155zM24.81 22.112H12.144v9.005H24.81v-9.005zm-1.92 7.085h-8.826v-5.165h8.826v5.165z"});function s(e,t){var n=e.title,s=e.titleId,o=c(e,["title","titleId"]);return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"#000",viewBox:"0 0 32 32",ref:t,"aria-labelledby":s},o),n?r.createElement("title",{id:s},n):null,a,l)}var o=r.forwardRef(s);n.p},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var a=r.createElement("defs",null),l=r.createElement("path",{d:"M6.05 14.14c.25.25.62.42.98.42.37 0 .73-.14.98-.42L19.44 2.72c.56-.56.56-1.43 0-2a1.39 1.39 0 00-2 0L7.05 11.15 2.51 6.66a1.39 1.39 0 00-1.98 0 1.39 1.39 0 000 2l5.51 5.48z"});function s(e,t){var n=e.title,s=e.titleId,o=c(e,["title","titleId"]);return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"#000",viewBox:"0 0 20 15",ref:t,"aria-labelledby":s},o),n?r.createElement("title",{id:s},n):null,a,l)}var o=r.forwardRef(s);n.p},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t),n.d(t,"SetIsVisibleContext",(function(){return R}));var r=n(3),i=n(0),c=n.n(i),a=(n(121),n(19)),l=n(5),s=n(13),o=n(7),u=n(6),b=n(15),d=(n(122),n(44)),f=n(1),m=function(e){var t=e.dropWrapperRef,n=e.closeDropWrapper;return Object(i.useEffect)((function(){var e=function(e){t&&t.current&&!t.current.contains(e.target)&&n(!1)},r=function(e){if("Escape"===e.key)return n(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keyup",r),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keyup",r)}}),[]),Object(f.jsx)("div",{className:e.className,ref:t,children:e.children})},v=Object(a.b)((function(e){return{user:e.user.user}}))((function(e){var t=Object(o.e)(!1),n=Object(r.a)(t,2),c=n[0],a=n[1],v=Object(i.useRef)(null),j=Object(l.h)();return Object(f.jsxs)("header",{className:e.isVisible||c?"topbar":"topbar topbar--hidden",children:[Object(f.jsx)("div",{className:"topbar__title",children:"Logotype"}),Object(f.jsxs)("div",{onMouseDown:function(){return a(!0)},className:"topbar__ava",children:[Object(f.jsx)(d.a,{src:Object(b.c)(e.user)}),c&&Object(f.jsx)(m,{dropWrapperRef:v,closeDropWrapper:a,children:Object(f.jsx)("div",{className:"topbar__menu",children:Object(f.jsxs)("ul",{className:"topbar__menu-list",children:[Object(f.jsx)("li",{className:"topbar__menu-item",children:Object(f.jsx)("button",{className:"topbar__menu-button",onClick:function(){return j("/schedule")},children:"Schedule"})}),Object(f.jsx)("li",{className:"topbar__menu-item",children:Object(f.jsx)("button",{className:"topbar__menu-button",onClick:function(){s.a.logoutUser().then((function(){localStorage.removeItem("token"),window.location.href=u.b.login}))},children:"Logout"})})]})})})]})]})})),j=n(14),h=n(10),p=(n(123),n(117)),O=n(118),g=n(119);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var y=i.createElement("defs",null),N=i.createElement("path",{d:"M23.104 6.784a10.336 10.336 0 00-3.52-2.304A3.648 3.648 0 0016 1.44a3.52 3.52 0 00-2.56 1.088 3.616 3.616 0 00-1.024 1.952 10.112 10.112 0 00-6.464 9.504v4.672H3.776v7.616h7.232a5.056 5.056 0 009.984 0h7.232v-7.616h-2.176v-4.672a10.079 10.079 0 00-2.944-7.2zm-15.232 7.2A8.16 8.16 0 0113.6 6.112l.768-.256-.096-.768A1.76 1.76 0 0116 3.36a1.728 1.728 0 011.728 1.728l-.096.768.768.256a8.192 8.192 0 015.728 7.872v4.672H7.872v-4.672zM16 28.64a3.104 3.104 0 01-3.04-2.368h6.08A3.104 3.104 0 0116 28.64zm10.304-4.288H5.696v-3.776h20.608v3.776z"});function w(e,t){var n=e.title,r=e.titleId,c=_(e,["title","titleId"]);return i.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",fill:"#000",viewBox:"0 0 32 32",ref:t,"aria-labelledby":r},c),n?i.createElement("title",{id:r},n):null,y,N)}var E=i.forwardRef(w);n.p;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var S=i.createElement("defs",null),M=i.createElement("path",{d:"M11.39 13.26a3.74 3.74 0 00-3.604 2.72H3.57v2.04h4.216a3.74 3.74 0 007.208 0H30.43v-2.04H14.994a3.74 3.74 0 00-3.604-2.72zm0 5.44a1.7 1.7 0 110-3.4 1.7 1.7 0 010 3.4zM22.61 3.91a3.74 3.74 0 00-3.604 2.72H3.57v2.04h15.436a3.74 3.74 0 007.208 0h4.216V6.63h-4.216a3.74 3.74 0 00-3.604-2.72zm0 5.44a1.7 1.7 0 110-3.4 1.7 1.7 0 010 3.4zM22.61 22.61a3.74 3.74 0 00-3.604 2.72H3.57v2.04h15.436a3.74 3.74 0 007.208 0h4.216v-2.04h-4.216a3.74 3.74 0 00-3.604-2.72zm0 5.44a1.7 1.7 0 110-3.4 1.7 1.7 0 010 3.4z"});function H(e,t){var n=e.title,r=e.titleId,c=I(e,["title","titleId"]);return i.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",fill:"#000",viewBox:"0 0 34 34",ref:t,"aria-labelledby":r},c),n?i.createElement("title",{id:r},n):null,S,M)}var P=i.forwardRef(H),V=(n.p,{openModal:h.d}),k=Object(a.b)((function(e){return{userType:e.user.user.type,unreadCount:e.notifications.count}}),V)((function(e){var t=e.unreadCount,n=Object(l.g)(),r=1===e.userType;Object(o.b)((function(){localStorage.successRegisterModal&&(setTimeout((function(){e.openModal(h.a.successRegisterModal)}),500),localStorage.removeItem("successRegisterModal"))}));var i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(n.pathname)?"navbar__item navbar__item--active":"navbar__item"};return Object(f.jsx)("nav",{className:e.isVisible?"navbar":"navbar navbar--hidden",children:Object(f.jsxs)("ul",{className:"navbar__list",children:[Object(f.jsx)("li",{className:i(u.b.main,u.b.invites),children:Object(f.jsxs)(j.b,{to:u.b.main,title:r?"Agencies":"Agents",className:"navbar__link",children:[Object(f.jsx)("div",{className:"navbar__icon",children:r?Object(f.jsx)(p.a,{}):Object(f.jsx)(O.a,{})}),Object(f.jsx)("div",{className:"navbar__item-title",children:r?"Agencies":"Agents"})]})}),Object(f.jsx)("li",{className:i(u.b.schedule),children:Object(f.jsxs)(j.b,{to:u.b.schedule,title:"Schedule",className:"navbar__link",children:[Object(f.jsxs)("div",{className:"navbar__icon",children:[" ",Object(f.jsx)(g.a,{})]}),Object(f.jsx)("div",{className:"navbar__item-title",children:"Schedule"})]})}),Object(f.jsx)("li",{className:i(u.b.notifications),children:Object(f.jsxs)(j.b,{to:u.b.notifications,title:"Notifications",className:"navbar__link",children:[Object(f.jsxs)("div",{className:"navbar__icon",children:[Object(f.jsx)(E,{}),t?Object(f.jsx)("span",{className:"navbar__unread-count",children:t>99?"99+":t}):null]}),Object(f.jsx)("div",{className:"navbar__item-title",children:"Notifications"})]})}),Object(f.jsx)("li",{className:i(u.b.settings,u.b.settingsGeneral,u.b.settingsSchedule,u.b.settingsSecurity),children:Object(f.jsxs)(j.b,{to:u.b.settings,title:"Settings",className:"navbar__link",children:[Object(f.jsx)("div",{className:"navbar__icon navbar__icon--notification",children:Object(f.jsx)(P,{})}),Object(f.jsx)("div",{className:"navbar__item-title",children:"Settings"})]})})]})})})),R=c.a.createContext({});t.default=function(e){var t=Object(i.useState)(!0),n=Object(r.a)(t,2),c=n[0],a=n[1],l=Object(i.useState)(!0),s=Object(r.a)(l,2),o=s[0],u=s[1];return Object(f.jsxs)("div",{className:"main-page",children:[Object(f.jsx)(v,{isVisible:c}),Object(f.jsx)("main",{className:"main-page__wrapper",children:Object(f.jsx)(R.Provider,{value:{setIsVisibleTopbar:a,setIsVisibleNavbar:u},children:e.children})}),Object(f.jsx)(k,{isVisible:o})]})}},151:function(e,t,n){},152:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(3),c=n(19),a=n(7),l=n(24),s=n(124),o=(n(151),n(12)),u=n(13),b=n(15),d=n(10),f=(n(152),n(120)),m=n(44),v=n(23),j=n(1),h={openModal:d.d,reduceNotificationsCount:l.f},p=Object(c.b)((function(e,t){return{item:e.notifications.entities[t.itemId]}}),h)((function(e){var t=e.item,n=e.itemId,c=e.className,a=e.openModal,l=e.reduceNotificationsCount,s=e.setAcceptedNotificationIds,h=Object(r.useState)(!1),p=Object(i.a)(h,2),O=p[0],g=p[1],x=new Date(t.created_at).toLocaleString("en-GB",{day:"numeric",month:"short",hour:"numeric",minute:"2-digit",hour12:!0});return Object(j.jsxs)("div",{className:c?"notification-item ".concat(c):"notification-item",children:[Object(j.jsxs)("div",{className:"notification-item__header",children:[Object(j.jsxs)("div",{className:"notification-item__agency",children:[Object(j.jsx)("div",{className:"notification-item__agency-avatar",children:Object(j.jsx)(m.a,{src:Object(b.c)({img:t.img,type:t.type})})}),Object(j.jsx)("div",{className:"notification-item__agency-name",children:t.name})]}),Object(j.jsx)("div",{className:"notification-item__date",children:x})]}),Object(j.jsxs)("div",{className:"notification-item__main",children:[Object(j.jsx)("div",{className:"notification-item__title",children:"The agency invites you to become a member."}),Object(j.jsx)("div",{className:"notification-item__message",children:t.message?t.message:"\u201dGreetings, we discussed this with you trough the phone. Hope you are accept our invite\u201d"})]}),Object(j.jsx)("div",{className:"notification-item__footer",children:Object(j.jsxs)("div",{className:"notification-item__actions",children:[O?Object(j.jsxs)("div",{className:"notification-item__action-btn notification-item__action-btn--accepted",children:[Object(j.jsx)(f.a,{}),Object(j.jsx)("span",{children:"Accepted"})]}):Object(j.jsx)(v.a,{onClick:function(){return u.a.acceptNotification(t.id).then((function(){g(!0),l(1),s((function(e){return[].concat(Object(o.a)(e),[n])}))})).catch(console.error)},type:"button",spinnerSize:"10px",className:"notification-item__action-btn notification-item__action-btn--accept",children:"Accept"}),Object(j.jsx)("button",{onClick:function(){a(d.a.declineInviteModal,{itemId:n,token:t.id})},disabled:O,type:"button",className:Object(b.b)("notification-item__action-btn",["decline",O&&"disabled"]),children:"Decline"})]})})]})})),O=n(20),g={getNotifications:l.c,removeNotifications:l.g,getNotificationsCount:l.d},x=Object(c.b)((function(e){return{user:e.user.user,ids:e.notifications.ids,pending:e.notifications.pending}}),g)((function(e){var t=e.ids,n=e.pending,c=e.getNotifications,l=e.removeNotifications,o=e.getNotificationsCount,u=Object(r.useContext)(s.SetIsVisibleContext),b=u.setIsVisibleTopbar,d=u.setIsVisibleNavbar,f=Object(r.useRef)(10),m=Object(r.useRef)(0),v=Object(r.useRef)(!1),h=Object(r.useState)([]),g=Object(i.a)(h,2),x=g[0],_=g[1],y=Object(a.d)(t.length);Object(a.b)((function(){c(),o(),v.current=!1,f.current=t.length<=10?10:t.length})),Object(a.f)((function(){v.current=!0})),Object(r.useEffect)((function(){return function(){v.current&&l(x,!1)}}),[x]),Object(r.useLayoutEffect)((function(){y&&y===t.length+1?f.current-=1:y&&y===t.length-1&&(y===f.current||f.current%y)&&(f.current+=1)}),[t.length]);var N=function(e){w(e),E(e)},w=function(e){var n=e.currentTarget,r=n.scrollY,i=n.outerHeight;0===document.documentElement.scrollHeight-r-i&&f.current===t.length&&(f.current=t.length+10,c(t.length))},E=function(e){var t=e.currentTarget;m&&m.current?t.scrollY<20||document.documentElement.scrollHeight-(t.scrollY+t.outerHeight)<40||document.documentElement.scrollHeight-t.outerHeight<150?(b(!0),d(!0),m.current=0):t.scrollY<m.current?m.current-t.scrollY>40&&(b(!0),d(!0),m.current=0):(b(!1),d(!1),m.current=0):m.current=t.scrollY};return Object(r.useEffect)((function(){return window.addEventListener("scroll",N),function(){return window.removeEventListener("scroll",N)}}),[t.length]),n?Object(j.jsx)("div",{className:"notifications__spinner",children:Object(j.jsx)(O.a,{size:"150px"})}):Object(j.jsxs)("div",{className:"notifications",children:[Object(j.jsx)("h2",{className:"notifications__title",children:"Notifications"}),Object(j.jsx)("ul",{className:"notifications__list",children:0===t.length?Object(j.jsx)("div",{className:"notifications__empty-list",children:Object(j.jsx)("span",{children:"No notifications"})}):t.map((function(e){return Object(j.jsx)("li",{className:"notifications__list-item",children:Object(j.jsx)(p,{itemId:e,setAcceptedNotificationIds:_})},e)}))})]})}));t.default=function(){return console.log("Notifications Render"),Object(j.jsx)(x,{})}}}]);
//# sourceMappingURL=NotificationsChunk.5173a657.chunk.js.map